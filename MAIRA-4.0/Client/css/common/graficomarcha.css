/* =============================================
   GRÁFICO MARCHA - CSS IDÉNTICO A PERFIL DE ELEVACIÓN
   Copiado exactamente de CYGMarcha.css
   Fecha: 4 de noviembre de 2025
   ============================================= */

/* ==========================================
   PANEL GRÁFICO DE MARCHA (CENTRO)
   ========================================== */

/* Posicionamiento y estructura base - IDÉNTICO A PERFIL */
#graficoMarchaPanel {
    width: var(--panel-width);
    height: var(--panel-height);
    left: 33.33%;
    bottom: 0;
    background: var(--color-bg);
    position: fixed;
    z-index: 1200;
    border: 2px solid var(--color-primary);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Contenedor principal */
#graficoMarchaPanel .display-content {
    position: relative;
    height: calc(100% - var(--header-height));
    display: flex;
    flex-direction: column;
    padding: 10px;
}

/* Contenedor del gráfico de marcha - IDÉNTICO A PERFIL */
#graficoMarchaPanel .svg-container,
#graficoMarchaCanvas {
    width: 100%;
    height: calc(100% - 80px);
    min-height: 300px;
    position: relative;
    overflow: hidden;
}

/* ==========================================
   ELEMENTOS SVG - IDÉNTICOS A PERFIL
   ========================================== */

/* Ejes */
.axis-x path,
.axis-x line,
.axis-y path,
.axis-y line,
#graficoMarchaCanvas .axis path,
#graficoMarchaCanvas .axis line {
    stroke: #ffffff !important;
    stroke-opacity: 0.7 !important;
    stroke-width: 1.5 !important;
    shape-rendering: crispEdges !important;
}

.axis-x text,
.axis-y text,
#graficoMarchaCanvas .axis text,
#graficoMarchaCanvas .x-axis text,
#graficoMarchaCanvas .y-axis text {
    fill: #ffffff !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
}

/* Grilla - IDÉNTICA A PERFIL */
.grid-line,
#graficoMarchaCanvas .grid line,
#graficoMarchaCanvas .x-grid line,
#graficoMarchaCanvas .y-grid line {
    stroke: rgba(255, 255, 255, 0.1) !important;
    stroke-width: 1 !important;
    shape-rendering: crispEdges !important;
}

#graficoMarchaCanvas .grid path,
#graficoMarchaCanvas .x-grid path,
#graficoMarchaCanvas .y-grid path {
    stroke-width: 0 !important;
}

#graficoMarchaCanvas .grid .domain {
    display: none !important;
}

/* Área del gráfico - IDÉNTICA A PERFIL */
.marcha-area,
.march-area,
#graficoMarchaCanvas .area {
    fill: rgba(2, 129, 168, 0.3) !important;
    transition: fill-opacity 0.3s ease;
}

.marcha-area:hover,
.march-area:hover {
    fill-opacity: 0.5 !important;
}

/* Línea principal - IDÉNTICA A PERFIL */
.marcha-line,
.march-line,
#graficoMarchaCanvas .line {
    fill: none !important;
    stroke: var(--color-primary, #0281a8) !important;
    stroke-width: 2.5 !important;
    transition: stroke-width 0.3s ease;
}

.marcha-line:hover,
.march-line:hover {
    stroke-width: 3.5 !important;
}

/* Guías del mouse - IDÉNTICAS A PERFIL */
.mouse-guide-horizontal,
.mouse-guide-vertical,
#graficoMarchaCanvas .mouse-guide-horizontal,
#graficoMarchaCanvas .mouse-guide-vertical {
    stroke: rgba(255, 255, 255, 0.4) !important;
    stroke-width: 1 !important;
    stroke-dasharray: 4, 4 !important;
    pointer-events: none !important;
}

/* Área de selección - IDÉNTICA A PERFIL */
.selection-area,
#graficoMarchaCanvas .selection-area {
    fill: rgba(255, 255, 255, 0.1) !important;
    stroke: rgba(255, 255, 255, 0.5) !important;
    stroke-width: 1 !important;
    stroke-dasharray: 4, 4 !important;
    pointer-events: none !important;
}

/* ==========================================
   TOOLTIPS - IDÉNTICOS A PERFIL
   ========================================== */

.marcha-tooltip,
.tooltip-marcha,
#graficoMarchaCanvas .tooltip {
    position: absolute !important;
    background: rgba(0, 0, 0, 0.8) !important;
    border: 1px solid var(--color-primary, #0281a8) !important;
    border-radius: 4px !important;
    color: white !important;
    padding: 8px 12px !important;
    font-size: 12px !important;
    pointer-events: none !important;
    z-index: 1000 !important;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3) !important;
    transform: translate(-50%, -100%) !important;
    margin-top: -10px !important;
}

/* ==========================================
   PUNTOS DE CONTROL - CON COLORES
   ========================================== */

/* Líneas de referencia para PC */
.pc-line,
.pc-line-PI,
.pc-line-PT,
.pc-line-PC,
.pc-line-MCC,
#graficoMarchaCanvas .pc-line {
    stroke: rgba(255, 255, 255, 0.4) !important;
    stroke-width: 1.5 !important;
    stroke-dasharray: 5, 5 !important;
}

.pc-line-PI {
    stroke: #4CAF50 !important;
    stroke-width: 2 !important;
}

.pc-line-PT {
    stroke: #F44336 !important;
    stroke-width: 2 !important;
}

.pc-line-MCC {
    stroke: #FFC107 !important;
    stroke-width: 2 !important;
}

/* Círculos de puntos de control */
.pc-circle,
.control-point,
#graficoMarchaCanvas .pc-circle {
    fill: var(--color-primary, #0281a8) !important;
    stroke: #ffffff !important;
    stroke-width: 2 !important;
}

/* Etiquetas de PC */
.pc-label,
.pc-label-PI,
.pc-label-PT,
.pc-label-PC,
.pc-label-MCC,
#graficoMarchaCanvas .pc-label {
    font-size: 11px !important;
    font-weight: bold !important;
    fill: #ffffff !important;
    text-shadow:
        -1px -1px 0 #000,
        1px -1px 0 #000,
        -1px 1px 0 #000,
        1px 1px 0 #000 !important;
    pointer-events: none !important;
}

.pc-label-PI {
    fill: #4CAF50 !important;
}

.pc-label-PT {
    fill: #F44336 !important;
}

.pc-label-MCC {
    fill: #FFC107 !important;
}

/* ==========================================
   PANEL DE ESTADÍSTICAS - IDÉNTICO A PERFIL
   ========================================== */

.marcha-stats,
#graficoMarchaPanel .stats-panel {
    height: 80px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.2);
    border-top: 1px solid var(--color-primary, #0281a8);
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 10px;
}

.stat-item {
    background: rgba(2, 129, 168, 0.1) !important;
    border: 1px solid rgba(2, 129, 168, 0.3) !important;
    border-radius: 4px !important;
    padding: 10px !important;
    text-align: center !important;
}

.stat-item .stat-label {
    font-size: 0.8em !important;
    color: rgba(255, 255, 255, 0.7) !important;
    margin-bottom: 4px !important;
    text-transform: uppercase !important;
}

.stat-item .stat-value {
    font-size: 1.2em !important;
    color: #fff !important;
    font-weight: 600 !important;
}

/* ==========================================
   MODO FULLSCREEN - IDÉNTICO A PERFIL
   ========================================== */

.fullscreen#graficoMarchaPanel {
    width: 100vw !important;
    height: 100vh !important;
    left: 0 !important;
    bottom: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    z-index: 3000 !important;
}

.fullscreen#graficoMarchaPanel .display-content {
    height: calc(100vh - var(--header-height, 50px)) !important;
    padding: 20px !important;
}

.fullscreen#graficoMarchaPanel .svg-container,
.fullscreen#graficoMarchaPanel #graficoMarchaCanvas {
    height: calc(100vh - var(--header-height, 50px) - 100px) !important;
    flex: 1 !important;
    margin-bottom: 20px !important;
}

.fullscreen#graficoMarchaPanel svg {
    width: 100% !important;
    height: 100% !important;
}

.fullscreen#graficoMarchaPanel .axis text,
.fullscreen#graficoMarchaPanel .x-axis text,
.fullscreen#graficoMarchaPanel .y-axis text {
    font-size: 14px !important;
}

.fullscreen#graficoMarchaPanel .marcha-line,
.fullscreen#graficoMarchaPanel .march-line {
    stroke-width: 3 !important;
}

.fullscreen#graficoMarchaPanel .marcha-stats {
    position: relative !important;
    height: auto !important;
    min-height: 80px !important;
    margin-top: auto !important;
}

/* ==========================================
   RESPONSIVE - IDÉNTICO A PERFIL
   ========================================== */

@media (max-width: 768px) {
    #graficoMarchaPanel {
        width: 100% !important;
        height: 50vh !important;
        left: 0 !important;
    }

    .marcha-stats {
        height: auto !important;
        min-height: 120px !important;
    }

    .marcha-tooltip,
    .tooltip-marcha {
        font-size: 11px !important;
        padding: 6px 10px !important;
    }

    .axis text,
    .x-axis text,
    .y-axis text {
        font-size: 10px !important;
    }

    .fullscreen .axis text {
        font-size: 12px !important;
    }

    .fullscreen .marcha-stats {
        height: 100px !important;
    }
}

/* ==========================================
   ASEGURAR VISIBILIDAD DE TODO EL TEXTO SVG
   ========================================== */

#graficoMarchaCanvas svg text,
#graficoMarchaPanel svg text {
    fill: #ffffff !important;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
}

#graficoMarchaCanvas svg line {
    shape-rendering: crispEdges !important;
}

#graficoMarchaCanvas svg path {
    vector-effect: non-scaling-stroke !important;
}

/* ==========================================
   CONTROLES Y LEYENDA
   ========================================== */

.grafico-controls {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    flex-wrap: wrap;
    padding: 10px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.grafico-leyenda {
    display: flex;
    gap: 15px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    margin-top: 10px;
    flex-wrap: wrap;
    justify-content: center;
}

.leyenda-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.85em;
    color: #fff;
}

.leyenda-color {
    width: 20px;
    height: 12px;
    border-radius: 2px;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.leyenda-color.velocidad { background: #00ff88; }
.leyenda-color.elevacion { background: #ff8800; }
.leyenda-color.pendiente { background: #ff0088; }
.leyenda-color.marcha { background: var(--color-primary, #0281a8); }
